<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"whale-lyi.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1. 容器1.1 什么是容器容器是另外一种轻量级的虚拟化，容器是共用主机内核，利用内核的虚拟化技术隔离出一个独立的运行环境，拥有独立的一个文件系统，网络空间，进程空间视图等  1.2 容器与虚拟机从虚拟化层看容器，轻量级、高性能是核心价值  容器是在Linux内核实现的轻量级资源隔离机制  虚拟机是操作系统级别的资源隔离，容器本质上是进程级的资源隔离       容器 虚拟机">
<meta property="og:type" content="article">
<meta property="og:title" content="服务端开发(5) Docker">
<meta property="og:url" content="https://whale-lyi.github.io/2023/03/14/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91-5-Docker/index.html">
<meta property="og:site_name" content="Whale&#39;s Blog">
<meta property="og:description" content="1. 容器1.1 什么是容器容器是另外一种轻量级的虚拟化，容器是共用主机内核，利用内核的虚拟化技术隔离出一个独立的运行环境，拥有独立的一个文件系统，网络空间，进程空间视图等  1.2 容器与虚拟机从虚拟化层看容器，轻量级、高性能是核心价值  容器是在Linux内核实现的轻量级资源隔离机制  虚拟机是操作系统级别的资源隔离，容器本质上是进程级的资源隔离       容器 虚拟机">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195622248.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195912283.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195927526.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314202011156.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314202234086.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314204426093.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314211833037.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314211920219.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195016589.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195107330.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195254960.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195400824.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195801223.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195831410.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316201145944.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/8081-admin.jpg">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316204413073.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230315231523381.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316210453332.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316210159136.png">
<meta property="og:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230327160829434.png">
<meta property="article:published_time" content="2023-03-14T07:22:21.000Z">
<meta property="article:modified_time" content="2023-08-09T06:53:19.996Z">
<meta property="article:author" content="Whale">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195622248.png">

<link rel="canonical" href="https://whale-lyi.github.io/2023/03/14/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91-5-Docker/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>服务端开发(5) Docker | Whale's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Whale's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Stay hungry, Stay foolish</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://whale-lyi.github.io/2023/03/14/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91-5-Docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Whale">
      <meta itemprop="description" content="码农预备役">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Whale's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          服务端开发(5) Docker
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-14 15:22:21" itemprop="dateCreated datePublished" datetime="2023-03-14T15:22:21+08:00">2023-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-08-09 14:53:19" itemprop="dateModified" datetime="2023-08-09T14:53:19+08:00">2023-08-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NJU/" itemprop="url" rel="index"><span itemprop="name">NJU</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NJU/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">服务端开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-容器"><a href="#1-容器" class="headerlink" title="1. 容器"></a>1. 容器</h2><h3 id="1-1-什么是容器"><a href="#1-1-什么是容器" class="headerlink" title="1.1 什么是容器"></a>1.1 什么是容器</h3><p>容器是另外一种轻量级的虚拟化，容器是共用主机内核，利用内核的虚拟化技术隔离出一个独立的运行环境，拥有独立的一个文件系统，网络空间，进程空间视图等</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195622248.png" alt="image-20230314195622248" style="zoom:80%;" /></p>
<h3 id="1-2-容器与虚拟机"><a href="#1-2-容器与虚拟机" class="headerlink" title="1.2 容器与虚拟机"></a>1.2 容器与虚拟机</h3><p>从虚拟化层看容器，<strong>轻量级、高性能</strong>是核心价值</p>
<ul>
<li><p>容器是在Linux内核实现的轻量级资源隔离机制</p>
</li>
<li><p>虚拟机是操作系统级别的资源隔离，容器本质上是进程级的资源隔离</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>容器</th>
<th>虚拟机</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195912283.png" alt="image-20230314195912283" style="zoom:80%;" /></td>
<td><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314195927526.png" alt="image-20230314195927526" style="zoom:80%;" /></td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-Docker"><a href="#2-Docker" class="headerlink" title="2. Docker"></a>2. Docker</h2><p>只能运行在 Linux 环境，即使在 windows 系统提供了 Docker Desktop，底层也是运行在 Linux 虚拟机中的</p>
<h3 id="2-1-Windows下的两类容器"><a href="#2-1-Windows下的两类容器" class="headerlink" title="2.1 Windows下的两类容器"></a>2.1 Windows下的两类容器</h3><p>Windows Container</p>
<p>Linux Container</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314202011156.png" alt="image-20230314202011156" style="zoom:80%;" /></p>
<h3 id="2-2-Docker-的三部分"><a href="#2-2-Docker-的三部分" class="headerlink" title="2.2 Docker 的三部分"></a>2.2 Docker 的三部分</h3><p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314202234086.png" alt="image-20230314202234086" style="zoom:80%;" /></p>
<h3 id="2-3-Docker-基本命令"><a href="#2-3-Docker-基本命令" class="headerlink" title="2.3 Docker 基本命令"></a>2.3 Docker 基本命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker<br>docker container --<span class="hljs-built_in">help</span><br>docker --version<br>docker version<br>docker info<br>docker image <span class="hljs-built_in">ls</span><br>docker pull<br></code></pre></td></tr></table></figure>
<h4 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h4><p>docker search mongo</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314204426093.png" alt="image-20230314204426093" style="zoom:80%;" /></p>
<h4 id="docker-run-命令"><a href="#docker-run-命令" class="headerlink" title="docker run 命令"></a>docker run 命令</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run hello-world<br>-d: 后台运行容器，并返回容器ID<br>-i: 以交互模式运行容器，通常与 -t 同时使用<br>-t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用<br>-p: 指定（发布）端口映射，格式为：主机(宿主)端口:容器端口   <br>-P: 随机端口映射，容器内部端口随机映射到主机的高端口<br>--name=<span class="hljs-string">&quot;nginx-lb&quot;</span>: 为容器指定一个名称<br>-e username=<span class="hljs-string">&quot;ritchie&quot;</span>: 设置环境变量<br>--env-file=c:/temp1/t1.txt: 从指定文件读入环境变量<br>--expose=2000-2002: 开放（暴露）一个端口或一组端口；<br>--<span class="hljs-built_in">link</span> my-mysql:taozs : 添加链接到另一个容器<br>-v c:/temp1:/data: 绑定一个卷(volume)<br>--<span class="hljs-built_in">rm</span> 退出时自动删除容器<br>-w: 指定容器内的工作目录<br></code></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it -p 8080:80 nginx<br><span class="hljs-comment"># 可以通过宿主机的8080端口访问容器的80端口</span><br></code></pre></td></tr></table></figure>
<p><strong>busybox镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it busybox sh<br></code></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/hosts<br><span class="hljs-built_in">cat</span> /proc/version<br><span class="hljs-built_in">uname</span> -a<br></code></pre></td></tr></table></figure>
<h4 id="练习：gcc"><a href="#练习：gcc" class="headerlink" title="练习：gcc"></a>练习：gcc</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -v E:\WorkSpace\Server\gcc-hw:/hw -w /hw –it --name=server nercury/cmake-cpp:gcc-5.2<br>docker run --<span class="hljs-built_in">rm</span> -v E:\WorkSpace\Server\gcc-hw:/hw -w /hw –it --name=client nercury/cmake-cpp:gcc-5.2<br></code></pre></td></tr></table></figure>
<h4 id="练习：-mysql的启动和访问"><a href="#练习：-mysql的启动和访问" class="headerlink" title="练习： mysql的启动和访问"></a>练习： mysql的启动和访问</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker pull mysql:5.7<br>docker run --name my-mysql -e MYSQL_ROOT_PASSWORD=exampledb20 -d mysql:5.7<br>docker run -it --<span class="hljs-built_in">rm</span> --<span class="hljs-built_in">link</span> my-mysql:server mysql:5.7 mysql –hserver -uroot -pexampledb20 <span class="hljs-comment"># 客户端</span><br></code></pre></td></tr></table></figure>
<h3 id="2-4-数据卷"><a href="#2-4-数据卷" class="headerlink" title="2.4 数据卷"></a>2.4 数据卷</h3><p>Docker-managed volume（docker管理卷）</p>
<p>Bind mount volume（绑定挂载卷）</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314211833037.png" alt="image-20230314211833037" style="zoom:80%;" /></p>
<p>volumes: Docker 管理宿主机文件系统的一部分，默认位于 /var/lib/docker/volumes</p>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker volume <span class="hljs-built_in">ls</span><br>docker volume create my_volume<br><span class="hljs-comment"># 使用</span><br>docker run -v my_volume:/data -it --<span class="hljs-built_in">rm</span> busybox sh<br><span class="hljs-comment"># 进入命令行后 /data 下的内容就永久存储在 my_volume</span><br></code></pre></td></tr></table></figure>
<h3 id="2-5-容器网络"><a href="#2-5-容器网络" class="headerlink" title="2.5 容器网络"></a>2.5 容器网络</h3><p>none网络，—net=none</p>
<p>host网络，—net=host</p>
<p>bridge网络，—net=bridge ， docker0 的 linux bridge</p>
<ul>
<li>创建的容器默认搭在桥上，不同容器可以通信，并可以路由到宿主机及外部网络</li>
</ul>
<p>container模式，—net=container:NAME_or_ID</p>
<ul>
<li>使两个容器使用完全相同的网络，可以共享 localhost</li>
</ul>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230314211920219.png" alt="image-20230314211920219" style="zoom:80%;" /></p>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker network <span class="hljs-built_in">ls</span><br>docker network create my_network<br>docker network inspect my_network <span class="hljs-comment"># 查看网络详细信息</span><br></code></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;Name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my_network&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;44348fb303ee38682ffa76afe17d9cc919ef29dc9de0d83689802952a82f94ac&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Created&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2023-03-16T11:46:54.154057664Z&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Scope&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;local&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Driver&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bridge&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;EnableIPv6&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;IPAM&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;Driver&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;default&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;Options&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;Config&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;Subnet&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;172.18.0.0/16&quot;</span><span class="hljs-punctuation">,</span><br>                    <span class="hljs-attr">&quot;Gateway&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;172.18.0.1&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">]</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Internal&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Attachable&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Ingress&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ConfigFrom&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;Network&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ConfigOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Containers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Options&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Labels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>首先创建两台容器，使用自己创建的网络(172.18.0.1，网关)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it --name=first --net=my_network busybox sh <span class="hljs-comment"># 搭载在刚刚创建的网络</span><br>docker run --<span class="hljs-built_in">rm</span> -it --name=second --net=my_network busybox sh <span class="hljs-comment"># 创建第二个容器</span><br></code></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>First</th>
<th>Second</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195016589.png" alt="image-20230316195016589" style="zoom:80%;" /></td>
<td><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195107330.png" alt="image-20230316195107330" style="zoom:80%;" /></td>
</tr>
</tbody>
</table>
</div>
<p>这两个容器可以 ping 通</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195254960.png" alt="image-20230316195254960" style="zoom:80%;" /></p>
<p>再创建一个容器，使用默认的bridge网络</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it --name=third busybox sh<br></code></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>Third</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195400824.png" alt="image-20230316195400824" style="zoom:80%;" /></td>
</tr>
</tbody>
</table>
</div>
<p>显然无法ping通上面两个容器</p>
<p>可以给这个容器再加一个”网卡”，搭载在创建的网络上</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker network connect my_network 562ff5169a <span class="hljs-comment"># 容器id</span><br></code></pre></td></tr></table></figure>
<p>在不同的网络中有各自的ip</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195801223.png" alt="image-20230316195801223" style="zoom:80%;" /></p>
<p>现在就可以ping通了</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316195831410.png" alt="image-20230316195831410" style="zoom:80%;" /></p>
<h2 id="3-容器镜像构建与编排"><a href="#3-容器镜像构建与编排" class="headerlink" title="3. 容器镜像构建与编排"></a>3. 容器镜像构建与编排</h2><h3 id="3-1-由-Dockerfile-构建镜像"><a href="#3-1-由-Dockerfile-构建镜像" class="headerlink" title="3.1 由 Dockerfile 构建镜像"></a>3.1 由 Dockerfile 构建镜像</h3><p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316201145944.png" alt="image-20230316201145944" style="zoom:80%;" /></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># 基础镜像</span><br><span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.9</span><br><br><span class="hljs-comment"># 元数据</span><br><span class="hljs-keyword">LABEL</span><span class="language-bash"> maintainer=tzs919@163.com</span><br><br><span class="hljs-comment"># 在基础镜像的基础上执行的linux命令</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> -p /home/docker/code/app \</span><br><span class="language-bash">    &amp;&amp; <span class="hljs-built_in">mkdir</span> -p /root/.pip</span><br>    <br><span class="hljs-comment"># 拷贝命令，从当前上下文拷贝到目标容器的子目录下</span><br><span class="hljs-comment"># 上下文：Dockerfile所在的目录上下文</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> pip.conf /root/.pip/</span><br><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /home/docker/code/app</span><br><br><span class="hljs-comment"># 第二个点为WORKDIR</span><br><span class="hljs-comment"># 如果有不需要的文件或目录可以添加到.dockerignore</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt</span><br><br><span class="hljs-comment"># 指定环境变量</span><br><span class="hljs-keyword">ENV</span> MYNAME=<span class="hljs-string">&quot;taozhaosheng&quot;</span>\<br>    APP_PORT=<span class="hljs-number">80</span><br><br><span class="hljs-keyword">VOLUME</span><span class="language-bash"> /data</span><br><br><span class="hljs-comment"># 对外暴露端口号</span><br><span class="hljs-keyword">EXPOSE</span> $APP_PORT<br><br><span class="hljs-comment"># 容器启动后要执行的第一个程序</span><br><span class="hljs-comment">#CMD [&quot;uwsgi&quot;,&quot;--ini&quot;,&quot;uwsgi.ini&quot;]</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;python&quot;</span>,<span class="hljs-string">&quot;manage.py&quot;</span>,<span class="hljs-string">&quot;runserver&quot;</span>,<span class="hljs-string">&quot;0.0.0.0:80&quot;</span>]</span><br></code></pre></td></tr></table></figure>
<h4 id="Dockerfile文件的指令"><a href="#Dockerfile文件的指令" class="headerlink" title="Dockerfile文件的指令"></a>Dockerfile文件的指令</h4><ul>
<li><code>FROM</code>：指定基础镜像，必须为第一个命令</li>
<li><code>RUN</code>：构建镜像时执行的命令</li>
<li><code>ADD</code>：将本地文件添加到容器中，tar类型文件会自动解压</li>
<li><code>COPY</code>：功能类似ADD，但是不会自动解压文件</li>
<li><code>CMD</code>：构建容器后调用，也就是在容器启动时才进行调用</li>
<li><code>ENTRYPOINT</code>：配置容器，使其可执行化。配合CMD可省去“application”，只使用参数，用于<code>docker run</code>时根据不同参数执行不同功能</li>
<li><code>LABEL</code>：用于为镜像添加元数据</li>
<li><code>ENV</code>：设置环境变量</li>
<li><code>EXPOSE</code>：指定与外界交互的端口，容器内的端口号，<code>docker run</code>时加 -P 则会映射一个随机号（宿主机）</li>
<li><code>VOLUME</code>：用于指定持久化目录，docker run时如果没有指定挂载目录，会创建一个volume</li>
<li><code>WORKDIR</code>：工作目录，类似于cd命令</li>
<li><code>USER</code>：指定运行容器时的用户名或UID</li>
<li><code>ARG</code>：用于指定传递给构建运行时的变量</li>
<li><code>ONBUILD</code>：用于设置镜像触发器</li>
</ul>
<h4 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h4><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 生成镜像</span><br><span class="hljs-comment"># 最后一个点为 context</span><br>docker build -t mysite:latest .<br><span class="hljs-comment"># 运行容器</span><br>docker run -d --name=mysite -p 8081:80 mysite:latest<br></code></pre></td></tr></table></figure>
<p>访问<a target="_blank" rel="noopener" href="http://localhost:8081/admin/">http://localhost:8081/admin/</a></p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/8081-admin.jpg" alt="8081-admin"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it mysite bash <span class="hljs-comment"># 通过shell与容器交互</span><br>docker container inspect mysite <span class="hljs-comment"># 查看容器详细信息</span><br></code></pre></td></tr></table></figure>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316204413073.png" alt="image-20230316204413073" style="zoom:80%;" /></p>
<h4 id="Docker-build"><a href="#Docker-build" class="headerlink" title="Docker build"></a>Docker build</h4><ul>
<li><code>docker build [OPTIONS] PATH | URL | -</code></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26904830">如何编写最佳的Dockerfile</a>：<ul>
<li>.dockerignore文件</li>
<li>容器只运行单个应用</li>
<li>将多个RUN指令合并为一个</li>
<li>基础镜像的标签不要用latest</li>
<li>每个RUN指令后删除多余文件</li>
<li>选择合适的基础镜像(alpine版本最好)</li>
<li>设置 WORKDIR 和 CMD</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/386986915">Docker 健康检查 HEALTHCHECK 的使用方法</a></li>
</ul>
<h3 id="3-2-镜像分层"><a href="#3-2-镜像分层" class="headerlink" title="3.2 镜像分层"></a>3.2 镜像分层</h3><p>写时复制(COW，Copy-On-Write)</p>
<p>docker history \<image name> 查看镜像的层</p>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230315231523381.png" alt="image-20230315231523381" style="zoom:80%;" /></p>
<p>将所有的 RUN 指令合并为一个</p>
<ul>
<li>Dockerfile 中的<strong>每个指令</strong>都会创建一个新的镜像层</li>
<li>镜像层将被缓存和复用</li>
<li>当 Dockerfile 的指令修改了，复制的文件变化了，或者构建镜像时指定的变量不同了，对应的镜像层缓存就会失效</li>
<li>某一层的镜像缓存失效之后，它之后的镜像层缓存都会失效</li>
<li>镜像层是不可变的，如果我们在某一层中添加一个文件，然后在下一层中删除它，则镜像中依然会包含该文件(只是这个文件在 Docker 容器中不可见了)</li>
</ul>
<p>优化：<strong>把变化最少的部分放在Dockerfile的前面</strong>，这样可以充分利用镜像缓存</p>
<ul>
<li>例如将 <code>RUN pip install -r requirements.txt</code> 放在 <code>COPY . .</code> 之前</li>
</ul>
<h3 id="3-3-服务编排工具，docker-compose"><a href="#3-3-服务编排工具，docker-compose" class="headerlink" title="3.3 服务编排工具，docker-compose"></a>3.3 服务编排工具，docker-compose</h3><p>Compose 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排</p>
<p>一个单独的 docker-compose.yml 模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目 （project）</p>
<p>Compose 的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理</p>
<p>Compose 中有两个重要的概念</p>
<ul>
<li>服务(service)：一个应用的容器（可能会有多个容器），实际上可以包括若干运行相同镜像的容器实例</li>
<li>项目(project)：由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义</li>
</ul>
<p>使用微服务架构的系统一般包含若干个微服务，每个微服务一般部署多个实例。如果每个服务都要手动启停，那么效率低，维护量大</p>
<h4 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46545831/article/details/112995427">Docker-compose指令详解</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/93459395">Docker三剑客之docker-compose</a></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3.6&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">fluentd:</span><br>    <span class="hljs-attr">build:</span><br>      <span class="hljs-attr">context:</span> <span class="hljs-string">./fluentd</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ES_HOST=elasticsearch</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">ES_PORT=9200</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;24224:24224&quot;</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">elasticsearch</span><br><br>  <span class="hljs-attr">flask:</span><br>    <span class="hljs-attr">build:</span><br>      <span class="hljs-attr">context:</span> <span class="hljs-string">./container</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8090:80&quot;</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">fluentd</span><br>    <span class="hljs-attr">logging:</span><br>      <span class="hljs-attr">driver:</span> <span class="hljs-string">fluentd</span><br>      <span class="hljs-attr">options:</span><br>        <span class="hljs-attr">fluentd-address:</span> <span class="hljs-string">localhost:24224</span><br>        <span class="hljs-attr">tag:</span> <span class="hljs-string">docker.flask</span><br><br>  <span class="hljs-attr">elasticsearch:</span><br>      <span class="hljs-attr">image:</span> <span class="hljs-string">docker.elastic.co/elasticsearch/elasticsearch:6.3.2</span><br>      <span class="hljs-attr">environment:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">cluster.name=docker-cluster</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">bootstrap.memory_lock=true</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span><br>      <span class="hljs-attr">ulimits:</span><br>        <span class="hljs-attr">memlock:</span><br>          <span class="hljs-attr">soft:</span> <span class="hljs-number">-1</span><br>          <span class="hljs-attr">hard:</span> <span class="hljs-number">-1</span><br>      <span class="hljs-attr">ports:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;9200:9200&quot;</span><br>  <br>  <span class="hljs-attr">kibana:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">docker.elastic.co/kibana/kibana:6.3.2</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;5601:5601&quot;</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">elasticsearch</span><br></code></pre></td></tr></table></figure>
<p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316210453332.png" alt="image-20230316210453332"></p>
<blockquote>
<h4 id="YAML-文件"><a href="#YAML-文件" class="headerlink" title="YAML 文件"></a>YAML 文件</h4><p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230316210159136.png" alt="image-20230316210159136" style="zoom:80%;" /></p>
</blockquote>
<h4 id="docker-compose常用命令"><a href="#docker-compose常用命令" class="headerlink" title="docker-compose常用命令"></a>docker-compose常用命令</h4><ul>
<li>docker-compose —help</li>
<li>docker-compose up -d<ul>
<li>该命令十分强大，它将尝试自动完成包括构建镜像，（重新）创建服务，启动服务，并关联服务相关容器的一系列操作</li>
</ul>
</li>
<li>docker-compose ps、docker-compose ps —services</li>
<li>docker-compose images</li>
<li>docker-compose stop<ul>
<li>终止整个服务集合</li>
</ul>
</li>
<li>docker-compose stop nginx<ul>
<li>终止指定的服务（这有个点就是启动的时候会先启动 depends_on 中的容器，关闭的时候不会影响到depends_on中的）</li>
</ul>
</li>
<li>docker-compose logs -f [services…]<ul>
<li>查看容器的输出日志</li>
</ul>
</li>
<li>docker-compose build  [SERVICE…]</li>
<li>docker-compose rm nginx<ul>
<li>移除指定的容器</li>
</ul>
</li>
<li>docker-compose up -d —scale flask=3  organizationservice=2<ul>
<li>设置指定服务运行的容器个数</li>
</ul>
</li>
</ul>
<h4 id="ports、expose、links、depends-on"><a href="#ports、expose、links、depends-on" class="headerlink" title="ports、expose、links、depends_on"></a>ports、expose、links、depends_on</h4><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/382779508">docker-compose的ports、expose、links、depends_on使用技巧</a></p>
<h4 id="docker-compose-yml格式参考"><a href="#docker-compose-yml格式参考" class="headerlink" title="docker-compose.yml格式参考"></a>docker-compose.yml格式参考</h4><p><img src="https://whale-picture.oss-cn-hangzhou.aliyuncs.com/img/image-20230327160829434.png" alt="image-20230327160829434"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"># Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/03/11/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91-4-Spring-Security/" rel="prev" title="服务端开发(4) Spring Security">
      <i class="fa fa-chevron-left"></i> 服务端开发(4) Spring Security
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/03/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91-3-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%89%A9%E7%90%86%E5%AE%9E%E7%8E%B0/" rel="next" title="数据库开发(3) 数据表的物理实现">
      数据库开发(3) 数据表的物理实现 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%AE%B9%E5%99%A8"><span class="nav-number">1.</span> <span class="nav-text">1. 容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 什么是容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E5%AE%B9%E5%99%A8%E4%B8%8E%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 容器与虚拟机</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Docker"><span class="nav-number">2.</span> <span class="nav-text">2. Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Windows%E4%B8%8B%E7%9A%84%E4%B8%A4%E7%B1%BB%E5%AE%B9%E5%99%A8"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 Windows下的两类容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-Docker-%E7%9A%84%E4%B8%89%E9%83%A8%E5%88%86"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 Docker 的三部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-Docker-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 Docker 基本命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F"><span class="nav-number">2.3.1.</span> <span class="nav-text">搜索镜像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-run-%E5%91%BD%E4%BB%A4"><span class="nav-number">2.3.2.</span> <span class="nav-text">docker run 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9Agcc"><span class="nav-number">2.3.3.</span> <span class="nav-text">练习：gcc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9A-mysql%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E8%AE%BF%E9%97%AE"><span class="nav-number">2.3.4.</span> <span class="nav-text">练习： mysql的启动和访问</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 数据卷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 容器网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.5.1.</span> <span class="nav-text">示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA%E4%B8%8E%E7%BC%96%E6%8E%92"><span class="nav-number">3.</span> <span class="nav-text">3. 容器镜像构建与编排</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E7%94%B1-Dockerfile-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 由 Dockerfile 构建镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Dockerfile%E6%96%87%E4%BB%B6%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="nav-number">3.1.1.</span> <span class="nav-text">Dockerfile文件的指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="nav-number">3.1.2.</span> <span class="nav-text">构建镜像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Docker-build"><span class="nav-number">3.1.3.</span> <span class="nav-text">Docker build</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E9%95%9C%E5%83%8F%E5%88%86%E5%B1%82"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 镜像分层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E6%9C%8D%E5%8A%A1%E7%BC%96%E6%8E%92%E5%B7%A5%E5%85%B7%EF%BC%8Cdocker-compose"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 服务编排工具，docker-compose</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-compose-yml"><span class="nav-number">3.3.1.</span> <span class="nav-text">docker-compose.yml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#YAML-%E6%96%87%E4%BB%B6"><span class="nav-number">3.3.2.</span> <span class="nav-text">YAML 文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-compose%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">3.3.3.</span> <span class="nav-text">docker-compose常用命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ports%E3%80%81expose%E3%80%81links%E3%80%81depends-on"><span class="nav-number">3.3.4.</span> <span class="nav-text">ports、expose、links、depends_on</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#docker-compose-yml%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83"><span class="nav-number">3.3.5.</span> <span class="nav-text">docker-compose.yml格式参考</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Whale</p>
  <div class="site-description" itemprop="description">码农预备役</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">123</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Whale</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
